<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>MyBatis | 南藤北玄参</title>
<meta name="description" content="唯沉默为最高的轻蔑" />
<link rel="shortcut icon" href="https://nanteng.github.io/favicon.ico">
<link rel="stylesheet" href="https://nanteng.github.io/styles/main.css">

<script src="https://nanteng.github.io/media/js/jquery.min.js"></script>
<script src="https://nanteng.github.io/media/js/masonry.pkgd.min.js"></script>
<script src="https://nanteng.github.io/media/js/aos.js"></script>
<script src="https://nanteng.github.io/media/js/pace.min.js"></script>
<script src="https://nanteng.github.io/media/js/view-image.min.js"></script>
<script src="https://nanteng.github.io/media/js/jquery.magnific-popup.min.js"></script>
<script src="https://nanteng.github.io/media/js/functions.js"></script>
    <meta name="referrer" content="never">
    <meta name="description" content="MyBatis简介
MyBatis历史
MyBatis最初是Apache的一个开源项目iBatis, 2010年6月这个项目由Apache Software Foundation迁 移到了Google Code。随着开发团队转投Google..." />
    <meta name="keywords" content="Java" />
    <script src="https://nanteng.github.io/media/js/waterfall.min.js"></script>
    <script src="https://nanteng.github.io/media/js/prism.min.js"></script>
  </head>
  <body>
            <header id="header" class="grid-container">
        <!-- start: .menu-wrapper -->
        <div class="menu-mobile"> 
          <i class="fa fa-reorder"></i>
        </div>
        <div class="menu-wrapper">
          <div class="">
            <div class="logo">
              <a href="https://nanteng.github.io"><img src="\media\images\custom-headerLogo.gif" alt=""></a>
            </div>
            <!-- start: .main-nav -->

            <nav class="main-nav grid-container grid-parent">
              <ul id="menu-header" class="menu gradient-effect">
                <li class=""><a href="https://nanteng.github.io" class="menu">首页</a></li>
                
                  <li class="" >
                    <a href="/archives" class="menu">
                      归档
                    </a>
                  </li>
                
                  <li class="" >
                    <a href="/tags" class="menu">
                      标签
                    </a>
                  </li>
                
                  <li class="" >
                    <a href="https://cloud.dearkai.cn" class="menu">
                      云盘
                    </a>
                  </li>
                
                  <li class="" >
                    <a href="/post/about" class="menu">
                      关于
                    </a>
                  </li>
                
                <li class="search-menu-item hide-on-mobile hide-on-tablet"><a href="#search-lightbox" class="lightbox mfp-inline"><i class="fa fa-search-line"></i></a></li>
              </ul>
            </nav>
            <a href="#search-lightbox" class="lightbox epcl-search-button mfp-inline hide-on-tablet hide-on-desktop"><i class="fa fa-search-line"></i></a>
            <!-- end: .main-nav -->
            <div class="clear"></div>
            <div class="border hide-on-tablet hide-on-mobile"></div>
          </div>    
          <div class="clear"></div>
        </div>
        <!-- end: .menu-wrapper -->
        <div class="clear"></div>
      </header>
      <div class="hide-on-mobile hide-on-tablet hide-on-desktop">
        <div id="search-lightbox" class="grid-container grid-small grid-parent mfp-hide">
          <div class="search-wrapper section">
            <form id="gridea-search-form" data-update="1668567925322" action="/search/index.html" class="search-form" _lpchecked="1">
              <input type="text" name="q" id="s" value="" class="search-field" placeholder="搜点啥..." aria-label="搜点啥..." required="">
              <button type="submit" class="submit" aria-label="Submit">
                <i class="fa fa-search-line"></i>
              </button>
            </form>
          </div>
        </div>
      </div>

      <main id="single" class="main grid-container fullcover no-sidebar aos-init aos-animate" data-aos="fade">

        <div class="center content">
          <div class="featured-image cover" style="background-image: url('https://dearkai.oss-cn-beijing.aliyuncs.com/typora-img/20221109_235735.jpg');">
            <div class="meta top"> 
              <time class="meta-info" style="float:left;" datetime="2022-11-11"><i class="fa fa-calendar"></i><span class="lately">5 天前</span></time>
              
              <a href="https://nanteng.github.io/post/mybatis/#comments" class="comments meta-info" title="">
                <i class="fa fa-comment remixicon"></i><span class="comment-count valine-comment-count" data-xid="/mybatis/"> </span>
              </a>
              <span id="/mybatis/" class="leancloud_visitors views-counter meta-info" title=""><i class="fa fa-leancloud remixicon"></i><span class="leancloud-visitors-count"></span></span>
              
            </div>
            <div class="info">
              <div class="tags ">
                
                      <a href="https://nanteng.github.io/tag/TtKdK6ur-/" class="ctag ctag-0 ctag-TtKdK6ur-" aria-label="">Java</a>
                    
              </div>
              <h1 class="title ularge white bold">MyBatis</h1>
            </div>
          </div>
        </div>  

        <div class="epcl-page-wrapper">
          <div class="left-content grid-70 np-mobile">
            <article class="main-article post">
              <section class="post-content">
                <div class="text">
                  <h2 id="mybatis简介">MyBatis简介</h2>
<h3 id="mybatis历史">MyBatis历史</h3>
<p>MyBatis最初是Apache的一个开源项目iBatis, 2010年6月这个项目由Apache Software Foundation迁 移到了Google Code。随着开发团队转投Google Code旗下， iBatis3.x正式更名为MyBatis。代码于 2013年11月迁移到Github。 iBatis一词来源于“internet”和“abatis”的组合，是一个基于Java的持久层框架。 iBatis提供的持久层框架 包括SQL Maps和Data Access Objects（DAO）。</p>
<h3 id="mybatis特性">MyBatis特性</h3>
<ol>
<li>
<p>MyBatis 是支持定制化 SQL、存储过程以及高级映射的优秀的持久层框架</p>
</li>
<li>
<p>MyBatis 避免了几乎所有的 JDBC 代码和手动设置参数以及获取结果集</p>
</li>
<li>
<p>MyBatis可以使用简单的XML或注解用于配置和原始映射，将接口和Java的POJO（Plain Old Java Objects，普通的Java对象）映射成数据库中的记录</p>
</li>
<li>
<p>MyBatis 是一个 半自动的ORM（Object Relation Mapping）框架</p>
</li>
</ol>
<h3 id="和其它持久化层技术对比">和其它持久化层技术对比</h3>
<ul>
<li>JDBC
<ul>
<li>SQL 夹杂在Java代码中耦合度高，导致硬编码内伤</li>
<li>维护不易且实际开发需求中 SQL 有变化，频繁修改的情况多见</li>
<li>代码冗长，开发效率低</li>
</ul>
</li>
<li>Hibernate 和 JPA
<ul>
<li>操作简便，开发效率高</li>
<li>程序中的长难复杂 SQL 需要绕过框架</li>
<li>内部自动生产的 SQL，不容易做特殊优化</li>
<li>基于全映射的全自动框架，大量字段的 POJO 进行部分映射时比较困难。</li>
<li>反射操作太多，导致数据库性能下降</li>
</ul>
</li>
<li>MyBatis
<ul>
<li>轻量级，性能出色</li>
<li>SQL 和 Java 编码分开，功能边界清晰。Java代码专注业务、SQL语句专注数据</li>
<li>开发效率稍逊于HIbernate，但是完全能够接受</li>
</ul>
</li>
</ul>
<h2 id="搭建mybatis">搭建MyBatis</h2>
<p>创建Maven工程</p>
<ul>
<li>
<p>打包方式：jar</p>
<pre><code class="language-xml">&lt;packaging&gt;jar&lt;/packaging&gt;
</code></pre>
</li>
<li>
<p>引入依赖</p>
<pre><code class="language-xml">&lt;dependencies&gt;
    &lt;!-- Mybatis核心 --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
        &lt;artifactId&gt;mybatis&lt;/artifactId&gt;
        &lt;version&gt;3.5.7&lt;/version&gt;
    &lt;/dependency&gt;
    
    &lt;!-- junit测试 --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;junit&lt;/groupId&gt;
        &lt;artifactId&gt;junit&lt;/artifactId&gt;
        &lt;version&gt;4.12&lt;/version&gt;
    	&lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
    
    &lt;!-- MySQL驱动 --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;mysql&lt;/groupId&gt;
        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
        &lt;version&gt;5.1.3&lt;/version&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre>
</li>
<li>
<p>创建MyBatis的核心配置文件</p>
<blockquote>
<p>习惯上命名为mybatis-config.xml，这个文件名仅仅只是建议，并非强制要求。将来整合Spring 之后，这个配置文件可以省略。</p>
<p>核心配置文件主要用于配置连接数据库的环境以及MyBatis的全局配置信息</p>
<p>核心配置文件存放的位置是src/main/resources目录下</p>
</blockquote>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE configuration
    PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
    &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;
&lt;configuration&gt;
&lt;!--设置连接数据库的环境--&gt;
    &lt;environments default=&quot;development&quot;&gt;
        &lt;environment id=&quot;development&quot;&gt;
            &lt;transactionManager type=&quot;JDBC&quot;/&gt;
                &lt;dataSource type=&quot;POOLED&quot;&gt;
                    &lt;property name=&quot;driver&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;
                    &lt;property name=&quot;url&quot;
                    value=&quot;jdbc:mysql://localhost:3306/MyBatis&quot;/&gt;
                    &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;
                    &lt;property name=&quot;password&quot; value=&quot;123456&quot;/&gt;
                    &lt;/dataSource&gt;
                    &lt;/environment&gt;
                &lt;/environments&gt;
            &lt;!--引入映射文件--&gt;
            &lt;mappers&gt;
        &lt;mapper resource=&quot;mappers/UserMapper.xml&quot;/&gt;
    &lt;/mappers&gt;
&lt;/configuration&gt;
</code></pre>
</li>
<li>
<p>创建mapper接口</p>
<blockquote>
<p>MyBatis中的mapper接口相当于以前的dao。但是区别在于，mapper仅仅是接口，我们不需要 提供实现类。</p>
</blockquote>
<pre><code class="language-java">public interface UserMapper {
    /**
    * 添加用户信息
    */
    int insertUser();
}
</code></pre>
</li>
<li>
<p>创建MyBatis的映射文件</p>
<p>相关概念：ORM（Object Relationship Mapping）对象关系映射。</p>
<ul>
<li>对象：Java的实体类对象</li>
<li>关系：关系型数据库</li>
<li>映射：二者之间的对应关系</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">Java概念</th>
<th style="text-align:center">数据库概念</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">类</td>
<td style="text-align:center">表</td>
</tr>
<tr>
<td style="text-align:center">属性</td>
<td style="text-align:center">字段/列</td>
</tr>
<tr>
<td style="text-align:center">对象</td>
<td style="text-align:center">记录/行</td>
</tr>
</tbody>
</table>
<blockquote>
<p>1、映射文件的命名规则： 表所对应的实体类的类名+Mapper.xml</p>
<p>例如：表t_user，映射的实体类为User，所对应的映射文件为UserMapper.xml</p>
<p>因此一个映射文件对应一个实体类，对应一张表的操作 MyBatis映射文件用于编写SQL，访问以及操作表中的数据</p>
<p>MyBatis映射文件存放的位置是src/main/resources/mappers目录下</p>
<p>2、MyBatis中可以面向接口操作数据，要保证两个一致：</p>
<p>a&gt;mapper接口的全类名和映射文件的命名空间（namespace）保持一致 b&gt;mapper接口中方法的方法名和映射文件中编写SQL的标签的id属性保持一致</p>
</blockquote>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper
    PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
    &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
&lt;mapper namespace=&quot;com.atguigu.mybatis.mapper.UserMapper&quot;&gt;
    &lt;!--int insertUser();--&gt;
    &lt;insert id=&quot;insertUser&quot;&gt;
    	insert into t_user values(null,'张三','123',23,'女')
    &lt;/insert&gt;
&lt;/mapper&gt;
</code></pre>
</li>
<li>
<p>通过junit测试功能</p>
<pre><code class="language-java">//读取MyBatis的核心配置文件
InputStream is = Resources.getResourceAsStream(&quot;mybatis-config.xml&quot;);

//创建SqlSessionFactoryBuilder对象
SqlSessionFactoryBuilder sqlSessionFactoryBuilder = new SqlSessionFactoryBuilder();

//通过核心配置文件所对应的字节输入流创建工厂类SqlSessionFactory，生产SqlSession对象
SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.build(is);

//创建SqlSession对象，此时通过SqlSession对象所操作的sql都必须手动提交或回滚事务
//SqlSession sqlSession = sqlSessionFactory.openSession();
//创建SqlSession对象，此时通过SqlSession对象所操作的sql都会自动提交
SqlSession sqlSession = sqlSessionFactory.openSession(true);

//通过代理模式创建UserMapper接口的代理实现类对象
UserMapper userMapper = sqlSession.getMapper(UserMapper.class);

//调用UserMapper接口中的方法，就可以根据UserMapper的全类名匹配元素文件，通过调用的方法名匹配
映射文件中的SQL标签，并执行标签中的SQL语句
int result = userMapper.insertUser();
//sqlSession.commit();
System.out.println(&quot;结果：&quot;+result);
</code></pre>
<blockquote>
<ul>
<li>SqlSession：代表Java程序和数据库之间的会话。（HttpSession是Java程序和浏览器之间的 会话）</li>
<li>SqlSessionFactory：是“生产”SqlSession的“工厂”。</li>
<li>工厂模式：如果创建某一个对象，使用的过程基本固定，那么我们就可以把创建这个对象的 相关代码封装到一个“工厂类”中，以后都使用这个工厂类来“生产”我们需要的对象。</li>
</ul>
</blockquote>
</li>
<li>
<p>加入log4j日志功能</p>
<p>加入依赖</p>
<pre><code class="language-xml">&lt;!-- log4j日志 --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;log4j&lt;/groupId&gt;
    &lt;artifactId&gt;log4j&lt;/artifactId&gt;
    &lt;version&gt;1.2.17&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<p>加入log4j的配置文件</p>
<blockquote>
<p>log4j的配置文件名为log4j.xml，存放的位置是src/main/resources目录下</p>
</blockquote>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE log4j:configuration SYSTEM &quot;log4j.dtd&quot;&gt;

&lt;log4j:configuration xmlns:log4j=&quot;http://jakarta.apache.org/log4j/&quot;&gt;
    
	&lt;appender name=&quot;STDOUT&quot; class=&quot;org.apache.log4j.ConsoleAppender&quot;&gt;
		&lt;param name=&quot;Encoding&quot; value=&quot;UTF-8&quot; /&gt;
		&lt;layout class=&quot;org.apache.log4j.PatternLayout&quot;&gt;
			&lt;param name=&quot;ConversionPattern&quot; value=&quot;%-5p %d{MM-dd HH:mm:ss,SSS}
%m (%F:%L) \n&quot; /&gt;
		&lt;/layout&gt;
	&lt;/appender&gt;
	&lt;logger name=&quot;java.sql&quot;&gt;
		&lt;level value=&quot;debug&quot; /&gt;
	&lt;/logger&gt;
	&lt;logger name=&quot;org.apache.ibatis&quot;&gt;
		&lt;level value=&quot;info&quot; /&gt;
	&lt;/logger&gt;
	&lt;root&gt;
		&lt;level value=&quot;debug&quot; /&gt;
		&lt;appender-ref ref=&quot;STDOUT&quot; /&gt;
	&lt;/root&gt;
&lt;/log4j:configuration&gt;
</code></pre>
<blockquote>
<h6 id="日志的级别">日志的级别</h6>
<p>FATAL(致命)&gt;ERROR(错误)&gt;WARN(警告)&gt;INFO(信息)&gt;DEBUG(调试)</p>
<p>从左到右打印的内容越来越详细</p>
</blockquote>
</li>
</ul>
<h2 id="核心配置文件详解">核心配置文件详解</h2>
<p>核心配置文件中的标签必须按照固定的顺序：</p>
<p>properties?</p>
<p>settings?</p>
<p>typeAliases?</p>
<p>typeHandlers?</p>
<p>objectFactory?</p>
<p>objectWrapperFactory?</p>
<p>reflectorF actory?</p>
<p>plugins?</p>
<p>environments?</p>
<p>databaseIdProvider?</p>
<p>mappers?</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE configuration
PUBLIC &quot;-//MyBatis.org//DTD Config 3.0//EN&quot;
&quot;http://MyBatis.org/dtd/MyBatis-3-config.dtd&quot;&gt;
&lt;configuration&gt;
		&lt;!--引入properties文件，此时就可以${属性名}的方式访问属性值--&gt;
		&lt;properties resource=&quot;jdbc.properties&quot;&gt;&lt;/properties&gt;
		&lt;settings&gt;
			&lt;!--将表中字段的下划线自动转换为驼峰--&gt;
			&lt;setting name=&quot;mapUnderscoreToCamelCase&quot; value=&quot;true&quot;/&gt;
			&lt;!--开启延迟加载--&gt;
			&lt;setting name=&quot;lazyLoadingEnabled&quot; value=&quot;true&quot;/&gt;
		&lt;/settings&gt;
    
		&lt;typeAliases&gt;
        &lt;!--
        typeAlias：设置某个具体的类型的别名
        属性：
        type：需要设置别名的类型的全类名
        alias：设置此类型的别名，若不设置此属性，该类型拥有默认的别名，即类名且不区分大小
        写
        若设置此属性，此时该类型的别名只能使用alias所设置的值
        --&gt;
        &lt;!--&lt;typeAlias type=&quot;com.atguigu.mybatis.bean.User&quot;&gt;&lt;/typeAlias&gt;--&gt;
        &lt;!--&lt;typeAlias type=&quot;com.atguigu.mybatis.bean.User&quot; alias=&quot;abc&quot;&gt;
        &lt;/typeAlias&gt;--&gt;
        &lt;!--以包为单位，设置改包下所有的类型都拥有默认的别名，即类名且不区分大小写--&gt;
		&lt;package name=&quot;com.atguigu.mybatis.bean&quot;/&gt;
		&lt;/typeAliases&gt;
        &lt;!--
        environments：设置多个连接数据库的环境
        属性：
        default：设置默认使用的环境的id
        --&gt;
		&lt;environments default=&quot;mysql_test&quot;&gt;
            &lt;!--
            environment：设置具体的连接数据库的环境信息
            属性：
            id：设置环境的唯一标识，可通过environments标签中的default设置某一个环境的id，
            表示默认使用的环境
            --&gt;
			&lt;environment id=&quot;mysql_test&quot;&gt;
            &lt;!--
            transactionManager：设置事务管理方式
            属性：
			type：设置事务管理方式，type=&quot;JDBC|MANAGED&quot;
            type=&quot;JDBC&quot;：设置当前环境的事务管理都必须手动处理
            type=&quot;MANAGED&quot;：设置事务被管理，例如spring中的AOP
            --&gt;
			&lt;transactionManager type=&quot;JDBC&quot;/&gt;
            &lt;!--
            dataSource：设置数据源
            属性：
            type：设置数据源的类型，type=&quot;POOLED|UNPOOLED|JNDI&quot;
            type=&quot;POOLED&quot;：使用数据库连接池，即会将创建的连接进行缓存，下次使用可以从
            缓存中直接获取，不需要重新创建
            type=&quot;UNPOOLED&quot;：不使用数据库连接池，即每次使用连接都需要重新创建
            type=&quot;JNDI&quot;：调用上下文中的数据源
            --&gt;
            &lt;dataSource type=&quot;POOLED&quot;&gt;
                    &lt;!--设置驱动类的全类名--&gt;
                    &lt;property name=&quot;driver&quot; value=&quot;${jdbc.driver}&quot;/&gt;
                    &lt;!--设置连接数据库的连接地址--&gt;
                    &lt;property name=&quot;url&quot; value=&quot;${jdbc.url}&quot;/&gt;
                    &lt;!--设置连接数据库的用户名--&gt;
                    &lt;property name=&quot;username&quot; value=&quot;${jdbc.username}&quot;/&gt;
                    &lt;!--设置连接数据库的密码--&gt;
                    &lt;property name=&quot;password&quot; value=&quot;${jdbc.password}&quot;/&gt;
                &lt;/dataSource&gt;
                &lt;/environment&gt;
            &lt;/environments&gt;
            &lt;!--引入映射文件--&gt;
            &lt;mappers&gt;
            	&lt;mapper resource=&quot;UserMapper.xml&quot;/&gt;
            &lt;!--
            以包为单位，将包下所有的映射文件引入核心配置文件
            注意：此方式必须保证mapper接口和mapper映射文件必须在相同的包下
            --&gt;
        	&lt;package name=&quot;com.atguigu.mybatis.mapper&quot;/&gt;
        &lt;/mappers&gt;
    &lt;/configuration&gt;
</code></pre>
<h2 id="mybatis的增删改查">MyBatis的增删改查</h2>
<ol>
<li>
<p>添加</p>
<pre><code class="language-xml">&lt;!--int insertUser();--&gt;
&lt;insert id=&quot;insertUser&quot;&gt;
	insert into t_user values(null,'admin','123456',23,'男')
&lt;/insert&gt;
</code></pre>
</li>
<li>
<p>删除</p>
<pre><code class="language-xml">&lt;!--int deleteUser();--&gt;
&lt;delete id=&quot;deleteUser&quot;&gt;
	delete from t_user where id = 7
&lt;/delete&gt;
</code></pre>
</li>
<li>
<p>修改</p>
<pre><code class="language-xml">&lt;!--int updateUser();--&gt;
&lt;update id=&quot;updateUser&quot;&gt;
	update t_user set username='ybc',password='123' where id = 6
&lt;/update&gt;
</code></pre>
</li>
<li>
<p>查询一个实体类对象</p>
<pre><code class="language-xml">&lt;!--User getUserById();--&gt;
&lt;select id=&quot;getUserById&quot; resultType=&quot;com.atguigu.mybatis.bean.User&quot;&gt;
	select * from t_user where id = 2
&lt;/select&gt;
</code></pre>
</li>
<li>
<p>查询集合</p>
<pre><code class="language-xml">&lt;!--List&lt;User&gt; getUserList();--&gt;
&lt;select id=&quot;getUserList&quot; resultType=&quot;com.atguigu.mybatis.bean.User&quot;&gt;
	select * from t_user
&lt;/select&gt;
</code></pre>
<blockquote>
<h4 id="注意">注意：</h4>
<p>1、查询的标签select必须设置属性<code>resultType</code>或<code>resultMap</code>，用于设置实体类和数据库表的映射 关系</p>
<ul>
<li>
<p>resultType：自动映射，用于属性名和表中字段名一致的情况</p>
</li>
<li>
<p>resultMap：自定义映射，用于一对多或多对一或字段名和属性名不一致的情况</p>
</li>
</ul>
<p>2、当查询的数据为多条时，不能使用实体类作为返回值，只能使用集合，否则会抛出异常 <code>TooManyResultsException</code>；但是若查询的数据只有一条，可以使用实体类或集合作为返回值</p>
</blockquote>
</li>
</ol>
<h2 id="mybatis获取参数值的两种方式">MyBatis获取参数值的两种方式</h2>
<h3 id="mybatis获取参数值的两种方式-2">MyBatis获取参数值的两种方式：</h3>
<ul>
<li><code>${}</code>本质就是字符串拼接
<ul>
<li><code>${}</code>使用字符串拼接的方式拼接sql，若为字符串类型或日期类型的字段进行赋值时，需要手动加单引 号</li>
</ul>
</li>
<li><code>#{}</code>本质就是占位符赋值
<ul>
<li><code>#{}</code>使用占位符赋值的方式拼接sql，此时为字符串类型或日期类型的字段进行赋值时，可以自 动添加单引号</li>
</ul>
</li>
</ul>
<h3 id="单个字面量类型的参数">单个字面量类型的参数</h3>
<p>若mapper接口中的方法参数为单个的字面量类型</p>
<p>此时可以使用<span class='katex-error' title='ParseError: KaTeX parse error: Expected &#039;EOF&#039;, got &#039;#&#039; at position 4: {}和#̲{}以任意的名称获取参数的值，…'>{}和#{}以任意的名称获取参数的值，注意</span>{}需要手动加单引号</p>
<h3 id="多个字面量类型的参数">多个字面量类型的参数</h3>
<p>若mapper接口中的方法参数为多个时</p>
<p>此时MyBatis会自动将这些参数放在一个map集合中，以<code>arg0</code>,<code>arg1</code>...为键，以参数为值；以 <code>param1</code>,<code>param2</code>...为键，以参数为值；因此只需要通过<span class='katex-error' title='ParseError: KaTeX parse error: Expected &#039;EOF&#039;, got &#039;#&#039; at position 4: {}和#̲{}访问map集合的键就可以获…'>{}和#{}访问map集合的键就可以获取相对应的 值，注意`</span>{}`需要手动加单引号</p>
<h3 id="map集合类型的参数">map集合类型的参数</h3>
<p>若mapper接口中的方法需要的参数为多个时</p>
<p>此时可以手动创建map集合，将这些数据放在map中 只需要通过<code>${}</code>和#{}访问map集合的键就可以获取相对应的值，注意<code>${}</code>需要手动加单引号</p>
<h3 id="实体类类型的参数">实体类类型的参数</h3>
<p>若mapper接口中的方法参数为实体类对象时</p>
<p>此时可以使用<code>${}</code>和<code>#{}</code>，通过访问实体类对象中的属性名获取属性值，注意<code>${}</code>需要手动加单引号</p>
<h3 id="使用param标识参数">使用@Param标识参数</h3>
<p>可以通过@Param注解标识mapper接口中的方法参数</p>
<p>此时，会将这些参数放在map集合中，以@Param注解的value属性值为键，以参数为值；以 param1,param2...为键，以参数为值；只需要通过<span class='katex-error' title='ParseError: KaTeX parse error: Expected &#039;EOF&#039;, got &#039;#&#039; at position 4: {}和#̲{}访问map集合的键就可以获…'>{}和#{}访问map集合的键就可以获取相对应的值， 注意</span>{}需要手动加单引号</p>
<h2 id="mybatis的各种查询功能">MyBatis的各种查询功能</h2>
<h3 id="查询一个实体类对象">查询一个实体类对象</h3>
<pre><code class="language-java">/**
* 根据用户id查询用户信息
* @param id
* @return
*/
User getUserById(@Param(&quot;id&quot;) int id);
</code></pre>
<pre><code class="language-xml">&lt;!--User getUserById(@Param(&quot;id&quot;) int id);--&gt;
&lt;select id=&quot;getUserById&quot; resultType=&quot;User&quot;&gt;
	select * from t_user where id = #{id}
&lt;/select&gt;
</code></pre>
<h3 id="查询一个list集合">查询一个list集合</h3>
<pre><code class="language-java">/**
* 查询所有用户信息
* @return
*/
List&lt;User&gt; getUserList();
</code></pre>
<pre><code class="language-xml">&lt;!--List&lt;User&gt; getUserList();--&gt;
&lt;select id=&quot;getUserList&quot; resultType=&quot;User&quot;&gt;
	select * from t_user
&lt;/select&gt;
</code></pre>
<h3 id="查询单个数据">查询单个数据</h3>
<pre><code class="language-java">/**
* 查询用户的总记录数
* @return
* 在MyBatis中，对于Java中常用的类型都设置了类型别名
* 例如：java.lang.Integer--&gt;int|integer
* 例如：int--&gt;_int|_integer
* 例如：Map--&gt;map,List--&gt;list
*/
int getCount();
</code></pre>
<pre><code class="language-xml">&lt;!--int getCount();--&gt;
&lt;select id=&quot;getCount&quot; resultType=&quot;_integer&quot;&gt;
	select count(id) from t_user
&lt;/select&gt;
</code></pre>
<h3 id="查询一条数据为map集合">查询一条数据为map集合</h3>
<pre><code class="language-java">/**
* 根据用户id查询用户信息为map集合
* @param id
* @return
*/
Map&lt;String, Object&gt; getUserToMap(@Param(&quot;id&quot;) int id);
</code></pre>
<pre><code class="language-xml">&lt;!--Map&lt;String, Object&gt; getUserToMap(@Param(&quot;id&quot;) int id);--&gt;
&lt;select id=&quot;getUserToMap&quot; resultType=&quot;map&quot;&gt;
	select * from t_user where id = #{id}
&lt;/select&gt;
&lt;!--结果：{password=123456, sex=男, id=1, age=23, username=admin}--&gt;
</code></pre>
<h3 id="查询多条数据为map集合">查询多条数据为map集合</h3>
<h4 id="方式一">方式一：</h4>
<pre><code class="language-java">/**
* 查询所有用户信息为map集合
* @return
* 将表中的数据以map集合的方式查询，一条数据对应一个map；若有多条数据，就会产生多个map集合，此时可以将这些map放在一个list集合中获取
*/
List&lt;Map&lt;String, Object&gt;&gt; getAllUserToMap();
</code></pre>
<pre><code class="language-xml">&lt;!--Map&lt;String, Object&gt; getAllUserToMap();--&gt;
&lt;select id=&quot;getAllUserToMap&quot; resultType=&quot;map&quot;&gt;
	select * from t_user
&lt;/select&gt;
</code></pre>
<h4 id="方式二">方式二：</h4>
<pre><code class="language-java">/**
* 查询所有用户信息为map集合
* @return
* 将表中的数据以map集合的方式查询，一条数据对应一个map；若有多条数据，就会产生多个map集合，并且最终要以一个map的方式返回数据，此时需要通过@MapKey注解设置map集合的键，值是每条数据所对应的map集合
*/
@MapKey(&quot;id&quot;)
Map&lt;String, Object&gt; getAllUserToMap();
</code></pre>
<pre><code class="language-xml">&lt;!--Map&lt;String, Object&gt; getAllUserToMap();--&gt;
&lt;select id=&quot;getAllUserToMap&quot; resultType=&quot;map&quot;&gt;
	select * from t_user
&lt;/select&gt;
结果：
&lt;!--
    {
        1={password=123456, sex=男, id=1, age=23, username=admin},
        2={password=123456, sex=男, id=2, age=23, username=张三},
        3={password=123456, sex=男, id=3, age=23, username=张三}
    }
--&gt;
</code></pre>
<h2 id="特殊sql的执行">特殊SQL的执行</h2>
<h3 id="模糊查询">模糊查询</h3>
<pre><code class="language-java">/**
* 测试模糊查询
* @param mohu
* @return
*/
List&lt;User&gt; testMohu(@Param(&quot;mohu&quot;) String mohu);
</code></pre>
<pre><code class="language-xml">&lt;!--List&lt;User&gt; testMohu(@Param(&quot;mohu&quot;) String mohu);--&gt;
&lt;select id=&quot;testMohu&quot; resultType=&quot;User&quot;&gt;
    
    &lt;!--select * from t_user where username like '%${mohu}%'--&gt;
    
    &lt;!--select * from t_user where username like concat('%',#{mohu},'%')--&gt;
    select * from t_user where username like &quot;%&quot;#{mohu}&quot;%&quot;
&lt;/select&gt;

</code></pre>
<h3 id="批量删除">批量删除</h3>
<pre><code class="language-java">/**
* 批量删除
* @param ids
* @return
*/
int deleteMore(@Param(&quot;ids&quot;) String ids);
</code></pre>
<pre><code class="language-xml">&lt;!--int deleteMore(@Param(&quot;ids&quot;) String ids);--&gt;
&lt;delete id=&quot;deleteMore&quot;&gt;
	delete from t_user where id in (${ids})
&lt;/delete&gt;
</code></pre>
<h3 id="动态设置表名">动态设置表名</h3>
<pre><code class="language-java">/**
* 动态设置表名，查询所有的用户信息
* @param tableName
* @return
*/
List&lt;User&gt; getAllUser(@Param(&quot;tableName&quot;) String tableName);
</code></pre>
<pre><code class="language-xml">&lt;!--List&lt;User&gt; getAllUser(@Param(&quot;tableName&quot;) String tableName);--&gt;
&lt;select id=&quot;getAllUser&quot; resultType=&quot;User&quot;&gt;
	select * from ${tableName}
&lt;/select&gt;
</code></pre>
<h3 id="添加功能获取自增的主键">添加功能获取自增的主键</h3>
<p>t_class(clazz_id,class_name)</p>
<p>t_student(student_id,student_name,class_id)</p>
<p>1，添加班级信息</p>
<p>2，获取新添加的班级的id</p>
<p>3，为班级分配学生，即将某学的班级id修改为新添加的班级的id</p>
<pre><code class="language-java">/**
* 添加用户信息
* @param user
* @return
* useGeneratedKeys：设置使用自增的主键
* keyProperty：因为增删改有统一的返回值是受影响的行数，因此只能将获取的自增的主键放在传输的参数user对象的某个属性中
*/
int insertUser(User user);
</code></pre>
<pre><code class="language-xml">&lt;!--int insertUser(User user);--&gt;
&lt;insert id=&quot;insertUser&quot; useGeneratedKeys=&quot;true&quot; keyProperty=&quot;id&quot;&gt;
	insert into t_user values(null,#{username},#{password},#{age},#{sex})
&lt;/insert&gt;
</code></pre>
<h2 id="自定义映射resultmap">自定义映射resultMap</h2>
<h3 id="resultmap处理字段和属性的映射关系">resultMap处理字段和属性的映射关系</h3>
<p>若字段名和实体类中的属性名不一致，则可以通过resultMap设置自定义映射</p>
<pre><code class="language-xml">        &lt;!--
        resultMap：设置自定义映射
        属性：
        id：表示自定义映射的唯一标识
        type：查询的数据要映射的实体类的类型
        子标签：
        id：设置主键的映射关系
        result：设置普通字段的映射关系
        association：设置多对一的映射关系
        collection：设置一对多的映射关系
        属性：
        property：设置映射关系中实体类中的属性名
        column：设置映射关系中表中的字段名
        --&gt;
&lt;resultMap id=&quot;userMap&quot; type=&quot;User&quot;&gt;
    &lt;id property=&quot;id&quot; column=&quot;id&quot;&gt;&lt;/id&gt;
    &lt;result property=&quot;userName&quot; column=&quot;user_name&quot;&gt;&lt;/result&gt;
    &lt;result property=&quot;password&quot; column=&quot;password&quot;&gt;&lt;/result&gt;
    &lt;result property=&quot;age&quot; column=&quot;age&quot;&gt;&lt;/result&gt;
    &lt;result property=&quot;sex&quot; column=&quot;sex&quot;&gt;&lt;/result&gt;
&lt;/resultMap&gt;

&lt;!--List&lt;User&gt; testMohu(@Param(&quot;mohu&quot;) String mohu);--&gt;
	&lt;select id=&quot;testMohu&quot; resultMap=&quot;userMap&quot;&gt;
        
	&lt;!--select * from t_user where username like '%${mohu}%'--&gt;
	select id,user_name,password,age,sex from t_user where user_name like concat('%',#{mohu},'%')
&lt;/select&gt;
</code></pre>
<blockquote>
<p>若字段名和实体类中的属性名不一致，但是字段名符合数据库的规则（使用_），实体类中的属性 名符合Java的规则（使用驼峰）</p>
<p>此时也可通过以下两种方式处理字段名和实体类中的属性的映射关系</p>
<ol>
<li>可以通过为字段起别名的方式，保证和实体类中的属性名保持一致</li>
<li>可以在MyBatis的核心配置文件中设置一个全局配置信息mapUnderscoreToCamelCase，可 以在查询表中数据时，自动将_类型的字段名转换为驼峰</li>
</ol>
<p>例如：字段名user_name，设置了mapUnderscoreToCamelCase，此时字段名就会转换为 userName</p>
</blockquote>
<h3 id="多对一映射处理">多对一映射处理</h3>
<blockquote>
<p>查询员工信息以及员工所对应的部门信息</p>
</blockquote>
<h4 id="级联方式处理映射关系">级联方式处理映射关系</h4>
<pre><code class="language-xml">&lt;resultMap id=&quot;empDeptMap&quot; type=&quot;Emp&quot;&gt;
    &lt;id column=&quot;eid&quot; property=&quot;eid&quot;&gt;&lt;/id&gt;
    &lt;result column=&quot;empName&quot; property=&quot;emp_name&quot;&gt;&lt;/result&gt;
    &lt;result column=&quot;age&quot; property=&quot;age&quot;&gt;&lt;/result&gt;
    &lt;result column=&quot;sex&quot; property=&quot;sex&quot;&gt;&lt;/result&gt;
    &lt;result column=&quot;did&quot; property=&quot;dept.did&quot;&gt;&lt;/result&gt;
    &lt;result column=&quot;dname&quot; property=&quot;dept.dname&quot;&gt;&lt;/result&gt;
&lt;/resultMap&gt;

&lt;!--Emp getEmpAndDeptByEid(@Param(&quot;eid&quot;) int eid);--&gt;
&lt;select id=&quot;getEmpAndDeptByEid&quot; resultMap=&quot;empDeptMap&quot;&gt;
	select emp.*,dept.* from t_emp emp left join t_dept dept on emp.did = dept.did where emp.eid = #{eid}
&lt;/select&gt;
</code></pre>
<h4 id="使用association处理映射关系">使用association处理映射关系</h4>
<pre><code class="language-xml">&lt;resultMap id=&quot;empDeptMap&quot; type=&quot;Emp&quot;&gt;
    &lt;id column=&quot;eid&quot; property=&quot;eid&quot;&gt;&lt;/id&gt;
    &lt;result column=&quot;empName&quot; property=&quot;emp_name&quot;&gt;&lt;/result&gt;
    &lt;result column=&quot;age&quot; property=&quot;age&quot;&gt;&lt;/result&gt;
    &lt;result column=&quot;sex&quot; property=&quot;sex&quot;&gt;&lt;/result&gt;
    	&lt;association property=&quot;dept&quot; javaType=&quot;Dept&quot;&gt;
            &lt;id column=&quot;did&quot; property=&quot;did&quot;&gt;&lt;/id&gt;
            &lt;result column=&quot;dname&quot; property=&quot;dname&quot;&gt;&lt;/result&gt;
		&lt;/association&gt;
&lt;/resultMap&gt;

&lt;!--Emp getEmpAndDeptByEid(@Param(&quot;eid&quot;) int eid);--&gt;
&lt;select id=&quot;getEmpAndDeptByEid&quot; resultMap=&quot;empDeptMap&quot;&gt;
select emp.*,dept.* from t_emp emp left join t_dept dept on emp.did = dept.did where emp.eid = #{eid}
&lt;/select&gt;
</code></pre>
<h4 id="分步查询">分步查询</h4>
<h5 id="1查询员工信息">1.查询员工信息</h5>
<pre><code class="language-java">/**
* 通过分步查询查询员工信息
* @param eid
* @return
*/
Emp getEmpByStep(@Param(&quot;eid&quot;) int eid);
</code></pre>
<pre><code class="language-xml">&lt;resultMap id=&quot;empDeptStepMap&quot; type=&quot;Emp&quot;&gt;
&lt;id column=&quot;eid&quot; property=&quot;eid&quot;&gt;&lt;/id&gt;
&lt;result column=&quot;empName&quot; property=&quot;emp_name&quot;&gt;&lt;/result&gt;
&lt;result column=&quot;age&quot; property=&quot;age&quot;&gt;&lt;/result&gt;
&lt;result column=&quot;sex&quot; property=&quot;sex&quot;&gt;&lt;/result&gt;
        &lt;!--
        select：设置分步查询，查询某个属性的值的sql的标识（namespace.sqlId）
        column：将sql以及查询结果中的某个字段设置为分步查询的条件
        --&gt;
    &lt;association property=&quot;dept&quot;
	select=&quot;com.atguigu.MyBatis.mapper.DeptMapper.getEmpDeptByStep&quot; column=&quot;did&quot;&gt;
	&lt;/association&gt;
&lt;/resultMap&gt;

&lt;!--Emp getEmpByStep(@Param(&quot;eid&quot;) int eid);--&gt;
&lt;select id=&quot;getEmpByStep&quot; resultMap=&quot;empDeptStepMap&quot;&gt;
	select * from t_emp where eid = #{eid}
&lt;/select&gt;
</code></pre>
<h5 id="2根据员工所对应的部门id查询部门信息">2.根据员工所对应的部门id查询部门信息</h5>
<pre><code class="language-java">/**
* 分步查询的第二步：根据员工所对应的did查询部门信息
* @param did
* @return
*/
Dept getEmpDeptByStep(@Param(&quot;did&quot;) int did);
</code></pre>
<pre><code class="language-xml">&lt;!--Dept getEmpDeptByStep(@Param(&quot;did&quot;) int did);--&gt;
&lt;select id=&quot;getEmpDeptByStep&quot; resultType=&quot;Dept&quot;&gt;
	select * from t_dept where did = #{did}
&lt;/select&gt;
</code></pre>
<h4 id="一对多映射处理">一对多映射处理</h4>
<h5 id="1collection">1.collection</h5>
<pre><code class="language-java">/**
* 根据部门id查新部门以及部门中的员工信息
* @param did
* @return
*/
Dept getDeptEmpByDid(@Param(&quot;did&quot;) int did);
</code></pre>
<pre><code class="language-xml">&lt;resultMap id=&quot;deptEmpMap&quot; type=&quot;Dept&quot;&gt;
    &lt;id property=&quot;did&quot; column=&quot;did&quot;&gt;&lt;/id&gt;
    &lt;result property=&quot;dname&quot; column=&quot;dname&quot;&gt;&lt;/result&gt;
    &lt;!--
    ofType：设置collection标签所处理的集合属性中存储数据的类型
    --&gt;
    &lt;collection property=&quot;emps&quot; ofType=&quot;Emp&quot;&gt;
        &lt;id property=&quot;eid&quot; column=&quot;eid&quot;&gt;&lt;/id&gt;
        &lt;result property=&quot;empName&quot; column=&quot;emp_name&quot;&gt;&lt;/result&gt;
        &lt;result property=&quot;age&quot; column=&quot;age&quot;&gt;&lt;/result&gt;
        &lt;result property=&quot;sex&quot; column=&quot;sex&quot;&gt;&lt;/result&gt;
    &lt;/collection&gt;
&lt;/resultMap&gt;

&lt;!--Dept getDeptEmpByDid(@Param(&quot;did&quot;) int did);--&gt;
&lt;select id=&quot;getDeptEmpByDid&quot; resultMap=&quot;deptEmpMap&quot;&gt;
select dept.*,emp.* from t_dept dept left join t_emp emp on dept.did = emp.did where dept.did = #{did}
&lt;/select&gt;
</code></pre>
<h5 id="分步查询-2">分步查询</h5>
<h6 id="1查询部门信息">1.查询部门信息</h6>
<pre><code class="language-java">/**
* 分步查询部门和部门中的员工
* @param did
* @return
*/
Dept getDeptByStep(@Param(&quot;did&quot;) int did);
</code></pre>
<pre><code class="language-xml">&lt;resultMap id=&quot;deptEmpStep&quot; type=&quot;Dept&quot;&gt;
    &lt;id property=&quot;did&quot; column=&quot;did&quot;&gt;&lt;/id&gt;
    &lt;result property=&quot;deptName&quot; column=&quot;dept_name&quot;&gt;&lt;/result&gt;
    &lt;collection property=&quot;emps&quot; fetchType=&quot;eager&quot;
    	select=&quot;com.atguigu.MyBatis.mapper.EmpMapper.getEmpListByDid&quot; column=&quot;did&quot;&gt;
    &lt;/collection&gt;
&lt;/resultMap&gt;

&lt;!--Dept getDeptByStep(@Param(&quot;did&quot;) int did);--&gt;
&lt;select id=&quot;getDeptByStep&quot; resultMap=&quot;deptEmpStep&quot;&gt;
select * from t_dept where did = #{did}
&lt;/select&gt;
</code></pre>
<h6 id="2根据部门id查询部门中的所有员工">2.根据部门id查询部门中的所有员工</h6>
<pre><code class="language-java">/**
* 根据部门id查询员工信息
* @param did
* @return
*/
List&lt;Emp&gt; getEmpListByDid(@Param(&quot;did&quot;) int did);
</code></pre>
<pre><code class="language-xml">&lt;!--List&lt;Emp&gt; getEmpListByDid(@Param(&quot;did&quot;) int did);--&gt;
&lt;select id=&quot;getEmpListByDid&quot; resultType=&quot;Emp&quot;&gt;
	select * from t_emp where did = #{did}
&lt;/select&gt;
</code></pre>
<blockquote>
<p>分步查询的优点：可以实现延迟加载，但是必须在核心配置文件中设置全局配置信息：</p>
<p>lazyLoadingEnabled：延迟加载的全局开关。当开启时，所有关联对象都会延迟加载</p>
<p>aggressiveLazyLoading：当开启时，任何方法的调用都会加载该对象的所有属性。 否则，每个 属性会按需加载</p>
<p>此时就可以实现按需加载，获取的数据是什么，就只会执行相应的sql。此时可通过<code>association</code>和 <code>collection</code>中的<code>fetchType属性</code>设置当前的分步查询是否使用延迟加载，<code>fetchType=&quot;lazy(延迟加 载)|eager(立即加载)&quot;</code></p>
</blockquote>
<h2 id="动态sql">动态SQL</h2>
<p>Mybatis框架的动态SQL技术是一种根据特定条件动态拼装SQL语句的功能，它存在的意义是为了解决 拼接SQL语句字符串时的痛点问题。</p>
<h3 id="if">if</h3>
<p>if标签可通过test属性的表达式进行判断，若表达式的结果为true，则标签中的内容会执行；反之标签中 的内容不会执行</p>
<pre><code class="language-xml">&lt;!--List&lt;Emp&gt; getEmpListByMoreTJ(Emp emp);--&gt;
&lt;select id=&quot;getEmpListByMoreTJ&quot; resultType=&quot;Emp&quot;&gt;
	select * from t_emp where 1=1
	&lt;if test=&quot;empName != '' and empName != null&quot;&gt;
		and emp_name = #{empName}
	&lt;/if&gt;
	&lt;if test=&quot;age != '' and age != null&quot;&gt;
		and age = #{age}
	&lt;/if&gt;
	&lt;if test=&quot;sex != '' and sex != null&quot;&gt;
		and sex = #{sex}
	&lt;/if&gt;
&lt;/select&gt;
</code></pre>
<h3 id="where">where</h3>
<pre><code class="language-xml">&lt;select id=&quot;getEmpListByMoreTJ2&quot; resultType=&quot;Emp&quot;&gt;
    select * from t_emp
    &lt;where&gt;
        &lt;if test=&quot;empName != '' and empName != null&quot;&gt;
        	emp_name = #{empName}
        &lt;/if&gt;
        &lt;if test=&quot;age != '' and age != null&quot;&gt;
        	and age = #{age}
        &lt;/if&gt;
        &lt;if test=&quot;sex != '' and sex != null&quot;&gt;
        	and sex = #{sex}
        &lt;/if&gt;
    &lt;/where&gt;
&lt;/select&gt;

</code></pre>
<blockquote>
<h4 id="where和if一般结合使用">where和if一般结合使用：</h4>
<ul>
<li>若where标签中的if条件都不满足，则where标签没有任何功能，即不会添加where关键字</li>
<li>若where标签中的if条件满足，则where标签会自动添加where关键字，并将条件最前方多余的 and去掉</li>
</ul>
<h4 id="注意where标签不能去掉条件最后多余的and">注意：where标签不能去掉条件最后多余的and</h4>
</blockquote>
<h3 id="trim">trim</h3>
<pre><code class="language-xml">&lt;select id=&quot;getEmpListByMoreTJ&quot; resultType=&quot;Emp&quot;&gt;
    select * from t_emp
    &lt;trim prefix=&quot;where&quot; suffixOverrides=&quot;and&quot;&gt;
        &lt;if test=&quot;empName != '' and empName != null&quot;&gt;
        	emp_name = #{empName} and
        &lt;/if&gt;
        &lt;if test=&quot;age != '' and age != null&quot;&gt;
        	age = #{age} and
        &lt;/if&gt;
        &lt;if test=&quot;sex != '' and sex != null&quot;&gt;
            sex = #{sex}
        &lt;/if&gt;
    &lt;/trim&gt;
&lt;/select&gt;

</code></pre>
<blockquote>
<h4 id="trim用于去掉或添加标签中的内容">trim用于去掉或添加标签中的内容</h4>
<p>常用属性：</p>
<ul>
<li>prefix：在trim标签中的内容的前面添加某些内容</li>
<li>prefixOverrides：在trim标签中的内容的前面去掉某些内容</li>
<li>suffix：在trim标签中的内容的后面添加某些内容</li>
<li>suffixOverrides：在trim标签中的内容的后面去掉某些内容</li>
</ul>
</blockquote>
<h3 id="choose-when-otherwise">choose、when、otherwise</h3>
<p>choose、when、otherwise相当于if...else if..else</p>
<pre><code class="language-xml">&lt;!--List&lt;Emp&gt; getEmpListByChoose(Emp emp);--&gt;
&lt;select id=&quot;getEmpListByChoose&quot; resultType=&quot;Emp&quot;&gt;
    select &lt;include refid=&quot;empColumns&quot;&gt;&lt;/include&gt; from t_emp
    &lt;where&gt;
        &lt;choose&gt;
            &lt;when test=&quot;empName != '' and empName != null&quot;&gt;
            	emp_name = #{empName}
            &lt;/when&gt;
            &lt;when test=&quot;age != '' and age != null&quot;&gt;
            	age = #{age}
            &lt;/when&gt;
            &lt;when test=&quot;sex != '' and sex != null&quot;&gt;
            	sex = #{sex}
            &lt;/when&gt;
            &lt;when test=&quot;email != '' and email != null&quot;&gt;
            	email = #{email}
            &lt;/when&gt;
        &lt;/choose&gt;
    &lt;/where&gt;
&lt;/select&gt;
</code></pre>
<h3 id="foreach">foreach</h3>
<pre><code class="language-xml">&lt;!--int insertMoreEmp(List&lt;Emp&gt; emps);--&gt;
&lt;insert id=&quot;insertMoreEmp&quot;&gt;
    insert into t_emp values
    &lt;foreach collection=&quot;emps&quot; item=&quot;emp&quot; separator=&quot;,&quot;&gt;
    	(null,#{emp.ename},#{emp.age},#{emp.sex},#{emp.email},null)
    &lt;/foreach&gt;
&lt;/insert&gt;

&lt;!--int deleteMoreByArray(int[] eids);--&gt;
&lt;delete id=&quot;deleteMoreByArray&quot;&gt;
    delete from t_emp where
    &lt;foreach collection=&quot;eids&quot; item=&quot;eid&quot; separator=&quot;or&quot;&gt;
    	eid = #{eid}
    &lt;/foreach&gt;
&lt;/delete&gt;


&lt;!--int deleteMoreByArray(int[] eids);--&gt;
&lt;delete id=&quot;deleteMoreByArray&quot;&gt;
    delete from t_emp where eid in
    &lt;foreach collection=&quot;eids&quot; item=&quot;eid&quot; separator=&quot;,&quot; open=&quot;(&quot; close=&quot;)&quot;&gt;
    	#{eid}
    &lt;/foreach&gt;
&lt;/delete&gt;
</code></pre>
<blockquote>
<p>属性：</p>
<ul>
<li>collection：设置要循环的数组或集合</li>
<li>item：表示集合或数组中的每一个数据</li>
<li>separator：设置循环体之间的分隔符</li>
<li>open：设置foreach标签中的内容的开始符</li>
<li>close：设置foreach标签中的内容的结束符</li>
</ul>
</blockquote>
<h3 id="sql片段">SQL片段</h3>
<p>sql片段，可以记录一段公共sql片段，在使用的地方通过<code>include</code>标签进行引入</p>
<pre><code class="language-xml">&lt;sql id=&quot;empColumns&quot;&gt;
	eid,ename,age,sex,did
&lt;/sql&gt;

select &lt;include refid=&quot;empColumns&quot;&gt;&lt;/include&gt; from t_emp
</code></pre>
<h2 id="mybatis的缓存">MyBatis的缓存</h2>
<h3 id="mybatis的一级缓存">MyBatis的一级缓存</h3>
<p>一级缓存是SqlSession级别的，通过同一个SqlSession查询的数据会被缓存，下次查询相同的数据，就 会从缓存中直接获取，不会从数据库重新访问</p>
<p>使一级缓存失效的四种情况：</p>
<ol>
<li>不同的SqlSession对应不同的一级缓存</li>
<li>同一个SqlSession但是查询条件不同</li>
<li>同一个SqlSession两次查询期间执行了任何一次增删改操作</li>
<li>同一个SqlSession两次查询期间手动清空了缓存</li>
</ol>
<h3 id="mybatis的二级缓存">MyBatis的二级缓存</h3>
<p>二级缓存是SqlSessionFactory级别，通过同一个SqlSessionFactory创建的SqlSession查询的结果会被 缓存；此后若再次执行相同的查询语句，结果就会从缓存中获取</p>
<p>二级缓存开启的条件：</p>
<ol>
<li>在核心配置文件中，设置全局配置属性cacheEnabled=&quot;true&quot;，默认为true，不需要设置</li>
<li>在映射文件中设置标签<code>&lt;cache/&gt;</code></li>
<li>二级缓存必须在SqlSession关闭或提交之后有效</li>
<li>查询的数据所转换的实体类类型必须实现序列化的接口</li>
</ol>
<p>使二级缓存失效的情况：</p>
<p>两次查询之间执行了任意的增删改，会使一级和二级缓存同时失效</p>
<h3 id="二级缓存的相关配置">二级缓存的相关配置</h3>
<p>在mapper配置文件中添加的cache标签可以设置一些属性：</p>
<ul>
<li>eviction属性：缓存回收策略
<ul>
<li>LRU（Least Recently Used）  最近最少使用的：移除最长时间不被使用的对象。（默认）</li>
<li>FIFO（First in First out） 先进先出：按对象进入缓存的顺序来移除它们。</li>
<li>SOFT  软引用：移除基于垃圾回收器状态和软引用规则的对象。</li>
<li>WEAK 弱引用：更积极地移除基于垃圾收集器状态和弱引用规则的对象。</li>
</ul>
</li>
<li>flushInterval属性：刷新间隔，单位毫秒
<ul>
<li>默认情况是不设置，也就是没有刷新间隔，缓存仅仅调用语句时刷新</li>
</ul>
</li>
<li>size属性：引用数目，正整数
<ul>
<li>代表缓存最多可以存储多少个对象，太大容易导致内存溢出</li>
</ul>
</li>
<li>readOnly属性：只读，true/false
<ul>
<li>true：只读缓存；会给所有调用者返回缓存对象的相同实例。因此这些对象不能被修改。这提供了 很重要的性能优势。</li>
<li>false：读写缓存；会返回缓存对象的拷贝（通过序列化）。这会慢一些，但是安全，因此默认是 false。</li>
</ul>
</li>
</ul>
<h3 id="mybatis缓存查询的顺序">MyBatis缓存查询的顺序</h3>
<ul>
<li>先查询二级缓存，因为二级缓存中可能会有其他程序已经查出来的数据，可以拿来直接使用。</li>
<li>如果二级缓存没有命中，再查询一级缓存</li>
<li>如果一级缓存也没有命中，则查询数据库</li>
<li>SqlSession关闭之后，一级缓存中的数据会写入二级缓存</li>
</ul>
<h3 id="整合第三方缓存ehcache">整合第三方缓存EHCache</h3>
<h4 id="1添加依赖">1.添加依赖</h4>
<pre><code class="language-xml">&lt;!-- Mybatis EHCache整合包 --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.mybatis.caches&lt;/groupId&gt;
    	&lt;artifactId&gt;mybatis-ehcache&lt;/artifactId&gt;
    &lt;version&gt;1.2.1&lt;/version&gt;
&lt;/dependency&gt;

&lt;!-- slf4j日志门面的一个具体实现 --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;
    	&lt;artifactId&gt;logback-classic&lt;/artifactId&gt;
    &lt;version&gt;1.2.3&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h4 id="2各jar包功能">2.各jar包功能</h4>
<table>
<thead>
<tr>
<th style="text-align:left">jar包名称</th>
<th style="text-align:left">作用</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">mybatis-ehcache</td>
<td style="text-align:left">Mybatis和EHCache的整合包</td>
</tr>
<tr>
<td style="text-align:left">ehcache</td>
<td style="text-align:left">EHCache核心包</td>
</tr>
<tr>
<td style="text-align:left">slf4j-api</td>
<td style="text-align:left">SLF4J日志门面包</td>
</tr>
<tr>
<td style="text-align:left">logback-classic</td>
<td style="text-align:left">支持SLF4J门面接口的一个具体实现</td>
</tr>
</tbody>
</table>
<h4 id="3创建ehcache的配置文件ehcachexml">3.创建EHCache的配置文件ehcache.xml</h4>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
&lt;ehcache xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
xsi:noNamespaceSchemaLocation=&quot;../config/ehcache.xsd&quot;&gt;
    &lt;!-- 磁盘保存路径 --&gt;
    &lt;diskStore path=&quot;D:\atguigu\ehcache&quot;/&gt;
    
    &lt;defaultCache
        maxElementsInMemory=&quot;1000&quot;
        maxElementsOnDisk=&quot;10000000&quot;
        eternal=&quot;false&quot;
        overflowToDisk=&quot;true&quot;
        timeToIdleSeconds=&quot;120&quot;
        timeToLiveSeconds=&quot;120&quot;
        diskExpiryThreadIntervalSeconds=&quot;120&quot;
        memoryStoreEvictionPolicy=&quot;LRU&quot;&gt;
    &lt;/defaultCache&gt;
&lt;/ehcache&gt;
</code></pre>
<h4 id="4ehcache配置文件说明">4.EHCache配置文件说明</h4>
<table>
<thead>
<tr>
<th>属性名</th>
<th>是 否 必 须</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>maxElementsInMemory</td>
<td>是</td>
<td>在内存中缓存的element的最大数目</td>
</tr>
<tr>
<td>maxElementsOnDisk</td>
<td>是</td>
<td>在磁盘上缓存的element的最大数目，若是0表示无穷大</td>
</tr>
<tr>
<td>eternal</td>
<td>是</td>
<td>设定缓存的elements是否永远不过期。 如果为 true，则缓存的数据始终有效， 如果为false那么还 要根据timeToIdleSeconds、timeToLiveSeconds 判断</td>
</tr>
<tr>
<td>overflowToDisk</td>
<td>是</td>
<td>设定当内存缓存溢出的时候是否将过期的element 缓存到磁盘上</td>
</tr>
<tr>
<td>timeToIdleSeconds</td>
<td>否</td>
<td>当缓存在EhCache中的数据前后两次访问的时间超 过timeToIdleSeconds的属性取值时， 这些数据便 会删除，默认值是0,也就是可闲置时间无穷大</td>
</tr>
<tr>
<td>timeToLiveSeconds</td>
<td>否</td>
<td>缓存element的有效生命期，默认是0,也就是 element存活时间无穷大</td>
</tr>
<tr>
<td>diskSpoolBufferSizeMB</td>
<td>否</td>
<td>DiskStore(磁盘缓存)的缓存区大小。默认是 30MB。每个Cache都应该有自己的一个缓冲区</td>
</tr>
<tr>
<td>diskPersistent</td>
<td>否</td>
<td>在VM重启的时候是否启用磁盘保存EhCache中的数 据，默认是false。</td>
</tr>
<tr>
<td>diskExpiryThreadIntervalSeconds</td>
<td>否</td>
<td>磁盘缓存的清理线程运行间隔，默认是120秒。每 个120s， 相应的线程会进行一次EhCache中数据的 清理工作</td>
</tr>
<tr>
<td>memoryStoreEvictionPolicy</td>
<td>否</td>
<td>当内存缓存达到最大，有新的element加入的时候， 移除缓存中element的策略。 默认是LRU（最 近最少使用），可选的有LFU（最不常使用）和 FIFO（先进先出）</td>
</tr>
</tbody>
</table>
<h4 id="5设置二级缓存的类型">5.设置二级缓存的类型</h4>
<pre><code class="language-xml">&lt;cache type=&quot;org.mybatis.caches.ehcache.EhcacheCache&quot;/&gt;
</code></pre>
<h4 id="6加入logback日志">6.加入logback日志</h4>
<p>存在SLF4J时，作为简易日志的log4j将失效，此时我们需要借助SLF4J的具体实现logback来打印日志。</p>
<p>创建logback的配置文件logback.xml</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration debug=&quot;true&quot;&gt;
    &lt;!-- 指定日志输出的位置 --&gt;
    &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;
    	&lt;encoder&gt;
    &lt;!-- 日志输出的格式 --&gt;
    &lt;!-- 按照顺序分别是：时间、日志级别、线程名称、打印日志的类、日志主体内容、换行 --&gt;
    		&lt;pattern&gt;[%d{HH:mm:ss.SSS}] [%-5level] [%thread] [%logger]
    [%msg]%n&lt;/pattern&gt;
    	&lt;/encoder&gt;
    &lt;/appender&gt;

    &lt;!-- 设置全局日志级别。日志级别按顺序分别是：DEBUG、INFO、WARN、ERROR --&gt;
    &lt;!-- 指定任何一个日志级别都只打印当前级别和后面级别的日志。 --&gt;
    &lt;root level=&quot;DEBUG&quot;&gt;
        &lt;!-- 指定打印日志的appender，这里通过“STDOUT”引用了前面配置的appender --&gt;
        &lt;appender-ref ref=&quot;STDOUT&quot; /&gt;
    &lt;/root&gt;
        
    &lt;!-- 根据特殊需求指定局部日志级别 --&gt;
    &lt;logger name=&quot;com.atguigu.crowd.mapper&quot; level=&quot;DEBUG&quot;/&gt;
&lt;/configuration&gt;
</code></pre>
<h2 id="mybatis的逆向工程">MyBatis的逆向工程</h2>
<ul>
<li>正向工程：先创建Java实体类，由框架负责根据实体类生成数据库表。Hibernate是支持正向工程的。</li>
<li>逆向工程：先创建数据库表，由框架负责根据数据库表，反向生成如下资源：
<ul>
<li>Java实体类</li>
<li>Mapper接口</li>
<li>Mapper映射文件</li>
</ul>
</li>
</ul>
<h3 id="创建逆向工程的步骤">创建逆向工程的步骤</h3>
<h4 id="1添加依赖和插件">1.添加依赖和插件</h4>
<pre><code class="language-xml">&lt;!-- 依赖MyBatis核心包 --&gt;
&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
        	&lt;artifactId&gt;mybatis&lt;/artifactId&gt;
        &lt;version&gt;3.5.7&lt;/version&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;

&lt;!-- 控制Maven在构建过程中相关配置 --&gt;
&lt;build&gt;
    &lt;!-- 构建过程中用到的插件 --&gt;
    &lt;plugins&gt;
        &lt;!-- 具体插件，逆向工程的操作是以构建过程中插件形式出现的 --&gt;
        &lt;plugin&gt;
            &lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt;
            &lt;artifactId&gt;mybatis-generator-maven-plugin&lt;/artifactId&gt;
            &lt;version&gt;1.3.0&lt;/version&gt;
        	
            &lt;!-- 插件的依赖 --&gt;
        	&lt;dependencies&gt;
            &lt;!-- 逆向工程的核心依赖 --&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;org.mybatis.generator&lt;/groupId&gt;
                	&lt;artifactId&gt;mybatis-generator-core&lt;/artifactId&gt;
                &lt;version&gt;1.3.2&lt;/version&gt;
            &lt;/dependency&gt;
            &lt;!-- 数据库连接池 --&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;com.mchange&lt;/groupId&gt;
                	&lt;artifactId&gt;c3p0&lt;/artifactId&gt;
                &lt;version&gt;0.9.2&lt;/version&gt;
            &lt;/dependency&gt;
            &lt;!-- MySQL驱动 --&gt;
            &lt;dependency&gt;
                &lt;groupId&gt;mysql&lt;/groupId&gt;
                	&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
                &lt;version&gt;5.1.8&lt;/version&gt;
            &lt;/dependency&gt;
        	&lt;/dependencies&gt;
        &lt;/plugin&gt;
    &lt;/plugins&gt;
&lt;/build&gt;
</code></pre>
<h4 id="2创建mybatis的核心配置文件">2.创建MyBatis的核心配置文件</h4>
<p>文件名必须是：<code>generatorConfig.xml</code></p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!DOCTYPE generatorConfiguration
    		PUBLIC &quot;-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN&quot;
			&quot;http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd&quot;&gt;
&lt;generatorConfiguration&gt;
    &lt;!--
        targetRuntime: 执行生成的逆向工程的版本
        MyBatis3Simple: 生成基本的CRUD（清新简洁版）
        MyBatis3: 生成带条件的CRUD（奢华尊享版）
    --&gt;
	&lt;context id=&quot;DB2Tables&quot; targetRuntime=&quot;MyBatis3Simple&quot;&gt;
		&lt;!-- 数据库的连接信息 --&gt;
		&lt;jdbcConnection 
                        driverClass=&quot;com.mysql.jdbc.Driver&quot; 													connectionURL=&quot;jdbc:mysql://localhost:3306/mybatis&quot; 
                        userId=&quot;root&quot; 
                        password=&quot;123456&quot;&gt;
		&lt;/jdbcConnection&gt;
		&lt;!-- javaBean的生成策略--&gt;
		&lt;javaModelGenerator targetPackage=&quot;com.atguigu.mybatis.pojo&quot;
targetProject=&quot;.\src\main\java&quot;&gt;
            &lt;property name=&quot;enableSubPackages&quot; value=&quot;true&quot; /&gt;
            &lt;property name=&quot;trimStrings&quot; value=&quot;true&quot; /&gt;
		&lt;/javaModelGenerator&gt;
		&lt;!-- SQL映射文件的生成策略 --&gt;
		&lt;sqlMapGenerator targetPackage=&quot;com.atguigu.mybatis.mapper&quot;
targetProject=&quot;.\src\main\resources&quot;&gt;
        	&lt;property name=&quot;enableSubPackages&quot; value=&quot;true&quot; /&gt;
        &lt;/sqlMapGenerator&gt;
        &lt;!-- Mapper接口的生成策略 --&gt;
        &lt;javaClientGenerator type=&quot;XMLMAPPER&quot;
targetPackage=&quot;com.atguigu.mybatis.mapper&quot; targetProject=&quot;.\src\main\java&quot;&gt;
			&lt;property name=&quot;enableSubPackages&quot; value=&quot;true&quot; /&gt;
		&lt;/javaClientGenerator&gt;
        &lt;!-- 逆向分析的表 --&gt;
        &lt;!-- tableName设置为*号，可以对应所有表，此时不写domainObjectName --&gt;
        &lt;!-- domainObjectName属性指定生成出来的实体类的类名 --&gt;
        &lt;table tableName=&quot;t_emp&quot; domainObjectName=&quot;Emp&quot;/&gt;
        &lt;table tableName=&quot;t_dept&quot; domainObjectName=&quot;Dept&quot;/&gt;
	&lt;/context&gt;
&lt;/generatorConfiguration&gt;
</code></pre>
<h4 id="3执行mbg插件的generate目标">3.执行MBG插件的generate目标</h4>
<figure data-type="image" tabindex="1"><img src="https://dearkai.oss-cn-beijing.aliyuncs.com/typora-img/image-20221111224643019.png" alt="image-20221111224643019" loading="lazy"></figure>
<p>效果</p>
<figure data-type="image" tabindex="2"><img src="https://dearkai.oss-cn-beijing.aliyuncs.com/typora-img/image-20221111224925197.png" alt="image-20221111224925197" loading="lazy"></figure>
<h3 id="qbc查询">QBC查询</h3>
<pre><code class="language-java">@Test
public void testMBG() throws IOException {
	InputStream is = Resources.getResourceAsStream(&quot;mybatis-config.xml&quot;);
	SqlSession sqlSession = new SqlSessionFactoryBuilder().build(is).openSession(true);
	EmpMapper mapper = sqlSession.getMapper(EmpMapper.class);
    
	EmpExample empExample = new EmpExample();
	//创建条件对象，通过andXXX方法为SQL添加查询添加，每个条件之间是and关系
			empExample.createCriteria().andEnameLike(&quot;a&quot;).andAgeGreaterThan(20).andDidIsNotNull();
    
	//将之前添加的条件通过or拼接其他条件
	empExample.or().andSexEqualTo(&quot;男&quot;);
	List&lt;Emp&gt; list = mapper.selectByExample(empExample);
	for (Emp emp : list) {
	System.out.println(emp);
	}
}
</code></pre>
<h2 id="分页插件">分页插件</h2>
<h3 id="分页插件使用步骤">分页插件使用步骤</h3>
<h4 id="1添加依赖-2">1.添加依赖</h4>
<pre><code class="language-xml">&lt;!-- https://mvnrepository.com/artifact/com.github.pagehelper/pagehelper --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;com.github.pagehelper&lt;/groupId&gt;
    	&lt;artifactId&gt;pagehelper&lt;/artifactId&gt;
    &lt;version&gt;5.2.0&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<h4 id="2配置分页插件">2.配置分页插件</h4>
<p>在MyBatis的核心配置文件中配置插件</p>
<pre><code class="language-xml">&lt;plugins&gt;
	&lt;!--设置分页插件--&gt;
	&lt;plugin interceptor=&quot;com.github.pagehelper.PageInterceptor&quot;&gt;&lt;/plugin&gt;
&lt;/plugins&gt;

</code></pre>
<h3 id="分页插件的使用">分页插件的使用</h3>
<p>在查询功能之前使用<code>PageHelper.startPage(int pageNum, int pageSize)</code>开启分页功能</p>
<blockquote>
<p><code>pageNum</code>：当前页的页码</p>
<p><code>pageSize</code>：每页显示的条数</p>
</blockquote>
<p>在查询获取list集合之后，使用<code>PageInfo pageInfo = new PageInfo&lt;&gt;(List list, int navigatePages)</code>获取分页相关数据</p>
<blockquote>
<p><code>list</code>：分页之后的数据</p>
<p><code>navigatePages</code>：导航分页的页码数</p>
</blockquote>
<p>分页相关数据</p>
<blockquote>
<h4 id="pagehelper">PageHelper</h4>
<p>PageInfo{</p>
<p>pageNum=8, pageSize=4, size=2, startRow=29, endRow=30, total=30, pages=8, list=Page{count=true, pageNum=8, pageSize=4, startRow=28, endRow=32, total=30, pages=8, reasonable=false, pageSizeZero=false},</p>
<p>prePage=7, nextPage=0, isFirstPage=false, isLastPage=true, hasPreviousPage=true, hasNextPage=false, navigatePages=5, navigateFirstPage4, navigateLastPage8, navigatepageNums=[4, 5, 6, 7, 8]</p>
<p>}</p>
<p>常用数据：</p>
<p>pageNum：当前页的页码</p>
<p>pageSize：每页显示的条数</p>
<p>size：当前页显示的真实条数</p>
<p>total：总记录数</p>
<p>pages：总页数</p>
<p>prePage：上一页的页码</p>
<p>nextPage：下一页的页码</p>
<p>isFirstPage/isLastPage：是否为第一页/最后一页</p>
<p>hasPreviousPage/hasNextPage：是否存在上一页/下一页</p>
<p>navigatePages：导航分页的页码数</p>
<p>navigatepageNums：导航分页的页码，[1,2,3,4,5]</p>
</blockquote>

                </div>
                <div class="clear"></div>
              </section>
            </article>
            <div class="clear"></div>

            <section class="related section">
              
              <article class="prev grid-50 tablet-grid-50 grid-parent">
                <div class="thumb cover lazy loaded" style="background-image: url('https://dearkai.oss-cn-beijing.aliyuncs.com/typora-img/20221112_004658.jpg');"></div>
                 <a href="https://nanteng.github.io/post/springmvc/" class="full-link"></a>
                 <div class="info">
                  <time datetime="2022-11-15">2022-11-15</time>
                  <h4 class="title white no-margin">SpringMVC</h4>
                </div>
                 <span class="epcl-button red">
                  <img src="https://nanteng.github.io/media/images/left-arrow.svg" width="15" alt="Left Arrow">
                </span>
                <div class="overlay"></div>
              </article>
              
              
              <article class="next grid-50 tablet-grid-50 grid-parent">
                <div class="thumb cover lazy loaded" style="background-image: url('https://dearkai.oss-cn-beijing.aliyuncs.com/typora-img/20221108_231914.jpg');"></div>
                 <a href="https://nanteng.github.io/post/thymeleaf/" class="full-link"></a>
                 <div class="info">
                  <time datetime="2022-11-10">2022-11-10</time>
                  <h4 class="title white no-margin">Thymeleaf</h4>
                </div>
                 <span class="epcl-button red">
                  <img src="https://nanteng.github.io/media/images/right-arrow.svg" width="15" alt="Left Arrow">
                </span>
                <div class="overlay"></div>
              </article>
              

                <div class="clear"></div>
            </section>

              <div class="clear"></div>
              
            
              <div id="comments" class="bg-white hosted ">
                <div class="clear"></div>
<script>
jQuery(document).ready(function($){
    $('.vemoji-btn').text('😀');
    $("#comments").on('click', 'span.vat',function(){
        $(this).parent('div.vmeta').next("div.vcontent").after($("div.vwrap"));
        $('textarea#veditor').focus();
    })
    if(window.location.hash){
        var checkExist = setInterval(function() {
            if ($(window.location.hash).length) {
                $('html, body').animate({scrollTop: $(window.location.hash).offset().top-200}, 600);
                clearInterval(checkExist);
            }
        }, 100);
    }
})
</script>

              </div>
            

            </div>
          </div>
      </main>

          <footer id="footer" class="grid-container">
        <div class="widgets row gradient-effect">
            <div class="default-sidebar border-effect">
              <div class="grid-33 tablet-grid-50 mobile-grid-100">
                <section id="tag_cloud-2" class="widget widget_epcl_posts_thumbs underline-effect">
                  <h4 class="widget-title title white bordered">最新文章</h4>
                  
                  
                  <article class="item post-0 post type-post status-publish format-standard has-post-thumbnail hentry">
                    <a href="https://nanteng.github.io/post/mavenbasics/" class="thumb hover-effect">
                      <span class="fullimage cover" style="display:block;border-radius:50%;background-image: url('https://dearkai.oss-cn-beijing.aliyuncs.com/typora-img/tumblr_b38009612775acb3f606c15e4ca4cfb0_9b8bb164_1280.png');"></span>
                    </a>
                    <div class="info gradient-effect">
                      <time datetime="2022-11-16">2022-11-16</time>
                      <h4 class="title usmall">
                        <a href="https://nanteng.github.io/post/mavenbasics/">MavenBasics</a>
                      </h4>
                    </div>
                    <div class="clear"></div>
                  </article>
                  
                  
                  
                  <article class="item post-1 post type-post status-publish format-standard has-post-thumbnail hentry">
                    <a href="https://nanteng.github.io/post/ssm-zheng-he/" class="thumb hover-effect">
                      <span class="fullimage cover" style="display:block;border-radius:50%;background-image: url('https://dearkai.oss-cn-beijing.aliyuncs.com/typora-img/お豆腐_99167071.jpg');"></span>
                    </a>
                    <div class="info gradient-effect">
                      <time datetime="2022-11-15">2022-11-15</time>
                      <h4 class="title usmall">
                        <a href="https://nanteng.github.io/post/ssm-zheng-he/">SSM整合</a>
                      </h4>
                    </div>
                    <div class="clear"></div>
                  </article>
                  
                  
                  
                  <article class="item post-2 post type-post status-publish format-standard has-post-thumbnail hentry">
                    <a href="https://nanteng.github.io/post/springmvc/" class="thumb hover-effect">
                      <span class="fullimage cover" style="display:block;border-radius:50%;background-image: url('https://dearkai.oss-cn-beijing.aliyuncs.com/typora-img/20221112_004658.jpg');"></span>
                    </a>
                    <div class="info gradient-effect">
                      <time datetime="2022-11-15">2022-11-15</time>
                      <h4 class="title usmall">
                        <a href="https://nanteng.github.io/post/springmvc/">SpringMVC</a>
                      </h4>
                    </div>
                    <div class="clear"></div>
                  </article>
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  
                  <div class="clear"></div>
                </section>
              </div>

              <div class="grid-33 tablet-grid-50 mobile-grid-100">
                <section id="tag_cloud-2" class="widget widget_tag_cloud underline-effect">
                  <h4 class="widget-title title white bordered">标签云</h4>
                  <div class="tagcloud">
                    
                      <a href="https://nanteng.github.io/tag/TtKdK6ur-/" class="ctag ctag-0 ctag-TtKdK6ur-" aria-label="">Java</a>
                    
                      <a href="https://nanteng.github.io/tag/Pb31zuZQs/" class="ctag ctag-1 ctag-Pb31zuZQs" aria-label="">诗歌</a>
                    
                      <a href="https://nanteng.github.io/tag/wFMTkH_sNe/" class="ctag ctag-2 ctag-wFMTkH_sNe" aria-label="">日记</a>
                    
                      <a href="https://nanteng.github.io/tag/q1drPjJv3/" class="ctag ctag-3 ctag-q1drPjJv3" aria-label="">随笔</a>
                    
                      <a href="https://nanteng.github.io/tag/eSKuLZlYEN/" class="ctag ctag-4 ctag-eSKuLZlYEN" aria-label="">Linux</a>
                    
                      <a href="https://nanteng.github.io/tag/i9Zqgezw0Q/" class="ctag ctag-5 ctag-i9Zqgezw0Q" aria-label="">体验</a>
                    
                      <a href="https://nanteng.github.io/tag/VxnVWpClHS/" class="ctag ctag-6 ctag-VxnVWpClHS" aria-label="">软件</a>
                    
                      <a href="https://nanteng.github.io/tag/1DZ-nCoLTA/" class="ctag ctag-7 ctag-1DZ-nCoLTA" aria-label="">信件</a>
                    
                      <a href="https://nanteng.github.io/tag/Fcf3eo9iSf/" class="ctag ctag-8 ctag-Fcf3eo9iSf" aria-label="">CentOS</a>
                    
                  </div>
                  <div class="clear"></div>
                </section>
              </div>

              <div class="grid-33 tablet-grid-50 mobile-grid-100">
                <section id="epcl_about-2" class="widget widget_epcl_about underline-effect">
                  <h4 class="widget-title title white bordered">关于我</h4>
                  <div class="avatar">
                    <a href="" class="translate-effect thumb"><span class="fullimage cover" style="background-image: url(https://nanteng.github.io/images/avatar.png);"></span></a>
                  </div>
                  <div class="info">
                    <h4 class="title small author-name gradient-effect no-margin"><a href="">南藤北玄参</a></h4>
                    <p class="founder">唯沉默为最高的轻蔑</p>
                    <div class="social">
                      
                          
                            <a href="https://github.com/NanTeng" class="translate-effect" target="_blank"><i class="fa fa-github"></i></a>
                        
                      
                          
                            <a href="https://twitter.com/NanTeng418" class="translate-effect" target="_blank"><i class="fa fa-twitter"></i></a>
                        
                      
                        
                      
                          
                            <a href="https://t.me/NanTeng" class="translate-effect" target="_blank"><i class="fa fa-telegram"></i></a>
                        
                      
                        
                      
                    </div> 
                  </div>
                  <div class="clear"></div>
                  </section>
              </div>

            </div>
            <div class="clear"></div>
        </div>

        <div class="logo">
          <a href="https://nanteng.github.io"><img src="\media\images\custom-footerLogo.gif" alt=""></a>
        </div>
        <p class="published border-effect">
          ©2019 共 28 篇文章
          <br/>
          Theme <a href="https://gridea.dev/" target="_blank">「breek」</a> Powered by <a href="https://gridea.dev/" target="_blank">「Gridea」</a>
        </p>
        
        <a href="javascript:void(0)" id="back-to-top" class="epcl-button dark" style="display:none">
          <i class="fa fa-arrow"></i>
        </a>
    </footer>
    
    <div class="clear"></div>

        
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/leancloud-storage/dist/av-min.js"></script>
<script type="text/javascript" src="https://cdn.staticfile.org/valine/1.3.10/Valine.Pure.min.js"></script>
<script>
    new Valine({
        el: '#comments',
        appId: 'JCYzcWAfC7BkMZHJ3hrKx85t-gzGzoHsz' ,
        appKey: 'r89Wpg7b2oYFtiu1JGnthBzN',
        pageSize: 30,
        placeholder: '既然来了，那就留个痕迹吧~',
        visitor: true // 阅读量统计
    })
</script>
    

      
    <script src="https://nanteng.github.io/media/js/functions-post.js"></script>

    </div>
    <!-- end: #wrapper -->
  </body>
</html>
